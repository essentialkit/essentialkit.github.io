var IS_DEV_BUILD=false;
(()=>{var kt=`<div class="wb-header">
    <div class="wb-control">
        <span title="Minimize" class="wb-min material-symbols-outlined">minimize</span>
        <span title="Maximize" class="wb-max material-symbols-outlined">tab_group</span>
        <span title="Fullscreen" class="wb-full material-symbols-outlined">fullscreen</span>
        <span title="Close" class="wb-close material-symbols-outlined">close</span>
    </div>
    <div class="wb-drag">
        <div class="wb-icon"></div>
        <div class="wb-title"></div>
    </div>
</div>
<div class="wb-body"></div>
<div class="wb-footer">
    <feedback-form size="inline"></feedback-form>
</div>
<div class="wb-n"></div>
<div class="wb-s"></div>
<div class="wb-w"></div>
<div class="wb-e"></div>
<div class="wb-nw"></div>
<div class="wb-ne"></div>
<div class="wb-se"></div>
<div class="wb-sw"></div>`;function a(i,t,e,s){i&&i.addEventListener(t,e,s||!1)}function V(i,t,e,s){i&&i.removeEventListener(t,e,s||!1)}function B(i,t){i.stopPropagation(),i.cancelable&&i.preventDefault()}function f(i,t){return i.getElementsByClassName(t)[0]}function ht(i,t){i.classList.add(t)}function Mt(i,t){return i.classList.contains(t)}function rt(i,t){i.classList.remove(t)}function r(i,t,e){e=""+e,i["_s_"+t]!==e&&(i.style.setProperty(t,e),i["_s_"+t]=e)}function Lt(i,t){let e=i.firstChild;e?e.nodeValue=t:i.textContent=t}var Z=!1,I=[],G={capture:!0,passive:!0},z,Tt=0,J=10,D,A,E,Ft,F,N,O=class{constructor(t,e){if(!(this instanceof O))return new O(t);z||qt();let s,o,n,u,h,_,T,q,S,H,P,l,k,w,b,x,M,p,C,K,g,v,c,m,X,Y,lt,ct,mt,Q,it,et,R,U,$,ut,at,ft,wt,bt,xt,gt,vt,pt,Ct,zt,_t,yt;if(t&&(e&&(h=t,t=e),typeof t=="string"?h=t:(s=t.id,o=t.index,n=t.root,u=t.template,h=h||t.title,_=t.icon,T=t.mount,q=t.html,S=t.url,H=t.shadowel,l=t.framename,k=t.cssurl,w=t.width,b=t.height,x=t.minwidth,M=t.minheight,p=t.maxwidth,C=t.maxheight,K=t.autosize,lt=t.min,ct=t.max,mt=t.hidden,Q=t.modal,g=t.x||(Q?"center":0),v=t.y||(Q?"center":0),c=t.top,m=t.left,X=t.bottom,Y=t.right,it=t.background,et=t.color,R=t.border,U=t.header,$=t.class,at=t.onclose,ft=t.onfocus,wt=t.onblur,bt=t.onmove,xt=t.onresize,gt=t.onfullscreen,vt=t.onmaximize,pt=t.onminimize,Ct=t.onrestore,zt=t.onhide,_t=t.onshow,yt=t.onload)),this.dom=Rt(u),this.dom.id=this.id=s||"winbox-"+ ++Tt,this.dom.className="winbox"+($?" "+(typeof $=="string"?$:$.join(" ")):"")+(Q?" modal":""),this.dom.winbox=this,this.window=this.dom,this.body=f(this.dom,"wb-body"),this.header=U||35,(o||o===0)&&(J=o),it&&this.setBackground(it),et&&this.setColor(et),R?r(this.body,"margin",R+(isNaN(R)?"":"px")):R=0,U){let y=f(this.dom,"wb-header");r(y,"height",U+"px"),r(y,"line-height",U+"px"),r(this.body,"top",U+"px")}h&&this.setTitle(h),_&&this.setIcon(_),T?this.mount(T):q?this.body.innerHTML=q:S&&this.setUrl(S,yt),c=c?d(c,N):0,X=X?d(X,N):0,m=m?d(m,F):0,Y=Y?d(Y,F):0;let st=F-m-Y,ot=N-c-X;if(p=p?d(p,st):st,C=C?d(C,ot):ot,x=x?d(x,p):150,M=M?d(M,C):this.header,K?((n||z).appendChild(this.body),w=Math.max(Math.min(this.body.clientWidth+R*2+1,p),x),b=Math.max(Math.min(this.body.clientHeight+this.header+R+1,C),M),this.dom.appendChild(this.body)):(w=w?d(w,p):Math.max(p/2,x)|0,b=b?d(b,C):Math.max(C/2,M)|0),g=g?d(g,st,w):m,v=v?d(v,ot,b):c,this.x=g,this.y=v,this.width=w,this.height=b,this.minwidth=x,this.minheight=M,this.maxwidth=p,this.maxheight=C,this.top=c,this.right=Y,this.bottom=X,this.left=m,this.index=o,this.min=!1,this.max=!1,this.full=!1,this.hidden=!1,this.focused=!1,this.onclose=at,this.onfocus=ft,this.onblur=wt,this.onmove=bt,this.onresize=xt,this.onfullscreen=gt,this.onmaximize=vt,this.onminimize=pt,this.onrestore=Ct,this.onhide=zt,this.onshow=_t,ct?this.maximize():lt?this.minimize():this.resize().move(),mt?this.hide():(this.focus(),(o||o===0)&&(this.index=o,o>J&&(J=o))),r(this.shadowdom?this.shadowdom:this.dom,"z-index",o),Ht(this),H){let y=document.createElement(H);y.style.position="absolute";let nt=document.createElement("link");if(nt.rel="stylesheet",nt.href=chrome.runtime.getURL("utils/winbox/winbox.css"),y.appendChild(nt),k){let j=document.createElement("link");j.rel="stylesheet",j.type="text/css",j.href=k,j.itemprop="url",y.appendChild(j)}y.appendChild(this.dom),y.attachShadow({mode:"open"}).innerHTML="<slot></slot>",this.shadowdom=y,(n||z).appendChild(y)}else(n||z).appendChild(this.dom);(ut=t.oncreate)&&ut.call(this,t)}static new(t){return new O(t)}mount(t){return this.unmount(),t._backstore||(t._backstore=t.parentNode),this.body.textContent="",this.body.appendChild(t),this}unmount(t){let e=this.body.firstChild;if(e){let s=t||e._backstore;s&&s.appendChild(e),e._backstore=t}return this}setTitle(t){let e=f(this.dom,"wb-title");return Lt(e,this.title=t),this}setIcon(t){let e=f(this.dom,"wb-icon");return r(e,"background-image","url("+t+")"),r(e,"display","inline-block"),this}setBackground(t){return r(this.dom,"background",t),this}setColor(t){r(this.dom,"color",t);let e=f(this.dom,"wb-header");return r(e,"color",t),this}setUrl(t,e){let s=this.body.firstChild;if(s&&s.tagName.toLowerCase()==="iframe")s.src=t;else{let o=this.framename??"";this.body.innerHTML=`<iframe name="${o}" src="${t}"></iframe>`,e&&(this.body.firstChild.onload=e)}return this}focus(t){return t===!1?this.blur():(A!==this&&this.dom&&(A&&A.blur(),r(this.shadowdom?this.shadowdom:this.dom,"z-index",++J),this.index=J,this.addClass("focus"),A=this,this.focused=!0,this.onfocus&&this.onfocus()),this)}blur(t){return t===!1?this.focus():(A===this&&(this.removeClass("focus"),this.focused=!1,this.onblur&&this.onblur(),A=null),this)}hide(t){if(t===!1)return this.show();if(!this.hidden)return this.onhide&&this.onhide(),this.hidden=!0,this.addClass("hide")}show(t){if(t===!1)return this.hide();if(this.hidden)return this.onshow&&this.onshow(),this.hidden=!1,this.removeClass("hide")}minimize(t){return t===!1?this.restore():(D&&tt(),this.max&&(this.removeClass("max"),this.max=!1),this.min||(I.push(this),dt(),this.dom.title=this.title,this.addClass("min"),this.min=!0,this.onminimize&&this.onminimize()),this)}restore(){return D&&tt(),this.min&&(W(this),this.resize().move(),this.onrestore&&this.onrestore()),this.max&&(this.max=!1,this.removeClass("max").resize().move(),this.onrestore&&this.onrestore()),this}maximize(t){return t===!1?this.restore():(D&&tt(),this.min&&W(this),this.max||(this.addClass("max").resize(F-this.left-this.right,N-this.top-this.bottom,!0).move(this.left,this.top,!0),this.max=!0,this.onmaximize&&this.onmaximize()),this)}fullscreen(t){if(this.min&&(W(this),this.resize().move()),!D||!tt())this.body[E](),D=this,this.full=!0,this.onfullscreen&&this.onfullscreen();else if(t===!1)return this.restore();return this}close(t){if(this.onclose&&this.onclose(t))return!0;this.min&&W(this),this.unmount(),this.dom.remove(),this.dom.textContent="",this.dom.winbox=null,this.body=null,this.dom=null,A===this&&(A=null)}move(t,e,s){return!t&&t!==0?(t=this.x,e=this.y):s||(this.x=t?t=d(t,F-this.left-this.right,this.width):0,this.y=e?e=d(e,N-this.top-this.bottom,this.height):0),r(this.dom,"left",t+"px"),r(this.dom,"top",e+"px"),this.onmove&&this.onmove(t,e),this}resize(t,e,s){return!t&&t!==0?(t=this.width,e=this.height):s||(this.width=t?t=d(t,this.maxwidth):0,this.height=e?e=d(e,this.maxheight):0,t=Math.max(t,this.minwidth),e=Math.max(e,this.minheight)),r(this.dom,"width",t+"px"),r(this.dom,"height",e+"px"),this.onresize&&this.onresize(t,e),this}addControl(t){let e=t.class,s=t.image,o=t.click,n=t.index,u=t.title,h=document.createElement("span"),_=f(this.dom,"wb-control"),T=this;return e&&(h.className=e),s&&r(h,"background-image","url("+s+")"),o&&(h.onclick=function(q){o.call(this,q,T)}),u&&(h.title=u,h.innerHTML=u.toLowerCase()),_.insertBefore(h,_.childNodes[n||0]),this}removeControl(t){return t=f(this.dom,t),t&&t.remove(),this}addClass(t){return ht(this.dom,t),this}removeClass(t){return rt(this.dom,t),this}hasClass(t){return Mt(this.dom,t)}toggleClass(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)}};function d(i,t,e){if(typeof i=="string")if(i==="center")i=(t-e)/2|0;else if(i==="right"||i==="bottom")i=t-e;else{let s=parseFloat(i);(""+s!==i&&i.substring((""+s).length))==="%"?i=t/100*s|0:i=s}return i}function qt(){z=document.body,z[E="requestFullscreen"]||z[E="msRequestFullscreen"]||z[E="webkitRequestFullscreen"]||z[E="mozRequestFullscreen"]||(E=""),Ft=E&&E.replace("request","exit").replace("mozRequest","mozCancel").replace("Request","Exit"),a(window,"resize",function(){Et(),dt()}),Et()}function Ht(i){L(i,"drag"),L(i,"n"),L(i,"s"),L(i,"w"),L(i,"e"),L(i,"nw"),L(i,"ne"),L(i,"se"),L(i,"sw"),a(f(i.dom,"wb-min"),"click",function(t){B(t),i.min?i.focus().restore():i.blur().minimize()}),a(f(i.dom,"wb-max"),"click",function(t){i.max?i.restore():i.maximize()}),E?a(f(i.dom,"wb-full"),"click",function(t){i.fullscreen()}):i.addClass("no-full"),a(f(i.dom,"wb-close"),"click",function(t){B(t),i.close()||(i=null)}),a(i.dom,"click",function(t){i.focus()})}function W(i){I.splice(I.indexOf(i),1),dt(),i.removeClass("min"),i.min=!1,i.dom.title=""}function dt(){let i=I.length,t={},e={};for(let s=0,o,n;s<i;s++)o=I[s],n=(o.left||o.right)+":"+(o.top||o.bottom),e[n]?e[n]++:(t[n]=0,e[n]=1);for(let s=0,o,n,u;s<i;s++)o=I[s],n=(o.left||o.right)+":"+(o.top||o.bottom),u=Math.min((F-o.left-o.right)/e[n],250),o.resize(u+1|0,o.header,!0).move(o.left+t[n]*u|0,N-o.bottom-o.header,!0),t[n]++}function L(i,t){let e=f(i.dom,"wb-"+t);if(!e)return;let s,o,n,u,h,_,T=0;a(e,"mousedown",S),a(e,"touchstart",S,G);function q(){u=requestAnimationFrame(q),_&&(i.resize(),_=!1),h&&(i.move(),h=!1)}function S(l){if(B(l),i.focus(),t==="drag"){if(i.min){i.restore();return}let k=Date.now(),w=k-T;if(T=k,w<300&&!i.dom.classList.contains("no-max")){i.max?i.restore():i.maximize();return}}!i.max&&!i.min&&(ht(z,"wb-lock"),Z&&q(),(s=l.touches)&&(s=s[0])?(l=s,a(window,"touchmove",H,G),a(window,"touchend",P,G)):(a(window,"mousemove",H),a(window,"mouseup",P)),o=l.pageX,n=l.pageY)}function H(l){B(l),s&&(l=l.touches[0]);let k=l.pageX,w=l.pageY,b=k-o,x=w-n,M=i.width,p=i.height,C=i.x,K=i.y,g,v,c,m;t==="drag"?(i.x+=b,i.y+=x,c=m=1):(t==="e"||t==="se"||t==="ne"?(i.width+=b,g=1):(t==="w"||t==="sw"||t==="nw")&&(i.x+=b,i.width-=b,g=1,c=1),t==="s"||t==="se"||t==="sw"?(i.height+=x,v=1):(t==="n"||t==="ne"||t==="nw")&&(i.y+=x,i.height-=x,v=1,m=1)),g&&(i.width=Math.max(Math.min(i.width,i.maxwidth,F-i.x-i.right),i.minwidth),g=i.width!==M),v&&(i.height=Math.max(Math.min(i.height,i.maxheight,N-i.y-i.bottom),i.minheight),v=i.height!==p),(g||v)&&(Z?_=!0:i.resize()),c&&(i.x=Math.max(Math.min(i.x,F-i.width-i.right),i.left),c=i.x!==C),m&&(i.y=Math.max(Math.min(i.y,N-i.height-i.bottom),i.top),m=i.y!==K),(c||m)&&(Z?h=!0:i.move()),(g||c)&&(o=k),(v||m)&&(n=w)}function P(l){B(l),rt(z,"wb-lock"),Z&&cancelAnimationFrame(u),s?(V(window,"touchmove",H,G),V(window,"touchend",P,G)):(V(window,"mousemove",H),V(window,"mouseup",P))}}function Et(){let i=document.documentElement;F=i.clientWidth,N=i.clientHeight}function At(){return document.fullscreen||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement}function tt(){if(D.full=!1,At())return document[Ft](),!0}function Rt(i){let t=document.createElement("div");return t.innerHTML=kt,(i||t).cloneNode(!0)}})();
